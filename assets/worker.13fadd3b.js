(function(){"use strict";const m=(t,o)=>t.data[o]*.3+t.data[o+1]*.59+t.data[o+2]*.11;function w(t,o=1,r=0){return Math.tanh(((t+r)*o/2+1)/2)}const h=10,y=.2,p=.6;function f(t,o,r){return t<o?o:t>r?r:t}function g(t,o,r){const n=(t-o)/(r-o)*2-1;return{r:f(Math.floor(w(n,h,-1*y)*255),0,255),g:f(Math.floor((w(n,h,p)-w(n,h,-p))*255),0,255),b:f(Math.floor((1-w(n,h,y))*255),0,255)}}function b(t){let o=-1/0;for(const r of t)r>o&&(o=r);return o}function T(t,o){const r=Array.from({length:65536},()=>0);for(let a=0,d=t.height-1;a<d;++a)for(let s=0,l=t.width-1;s<l;++s){const c=Math.floor(o(t,a*t.width+s));for(let i=0;i<t.height;++i)for(let u=0;u<t.width;++u){const E=Math.floor(o(t,i*t.width+u));r[c*256+E]++}}const e=b(r),n=new Uint8ClampedArray(256*256*4);for(let a=0;a<256;++a)for(let d=0;d<256;++d){const s=a*256+d,l=r[s],c=s*4,i=g(l,0,e);n[c]=i.r,n[c+1]=i.g,n[c+2]=i.b,n[c+3]=255}return new ImageData(n,256,256)}onmessage=t=>{const{temp:o}=t.data,r=T(new ImageData(new Uint8ClampedArray(o.data),o.width,o.height),m);postMessage({data:r.data.buffer,width:r.width,height:r.height},[r.data.buffer])}})();

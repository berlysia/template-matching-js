(function(){"use strict";const p=(t,o)=>t.data[o]*.3+t.data[o+1]*.59+t.data[o+2]*.11;function l(t,o,r){return t<=o?o:t>=r?r-1:t}function w(t,o=1,r=0){return Math.tanh(((t+r)*o/2+1)/2)}const h=10,u=.2,y=.6;function m(t,o,r){const n=(t-o)/(r-o)*2-1;return{r:l(Math.floor(w(n,h,-1*u)*255),0,256),g:l(Math.floor((w(n,h,y)-w(n,h,-y))*255),0,256),b:l(Math.floor((1-w(n,h,u))*255),0,256)}}function g(t){let o=-1/0;for(const r of t)r>o&&(o=r);return o}function b(t,o){const r=Array.from({length:65536},()=>0);for(let e=0,n=t.height-1;e<n;++e)for(let i=0,c=t.width-1;i<c;++i){const f=Math.floor(o(t,e*t.width+i));for(let s=0;s<t.height;++s)for(let a=0;a<t.width;++a){const d=Math.floor(o(t,s*t.width+a));r[f*256+d]++}}return r}function T(t,o){const r=b(t,o),e=g(r),n=new Uint8ClampedArray(256*256*4);for(let i=0;i<256;++i)for(let c=0;c<256;++c){const f=i*256+c,s=r[f],a=f*4,d=m(s,0,e);n[a]=d.r,n[a+1]=d.g,n[a+2]=d.b,n[a+3]=255}return new ImageData(n,256,256)}onmessage=t=>{const{temp:o}=t.data,r=T(new ImageData(new Uint8ClampedArray(o.data),o.width,o.height),p);postMessage({data:r.data.buffer,width:r.width,height:r.height},[r.data.buffer])}})();
